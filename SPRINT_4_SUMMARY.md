# üì¶ Sprint 4 Summary ‚Äî Inventory UI Enhancement

**–ü—Ä–æ–µ–∫—Ç:** Smart Warehouse AI
**–°–ø—Ä–∏–Ω—Ç:** 4 –∏–∑ 10
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 1 –¥–µ–Ω—å (—Ñ–∞–∫—Ç)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ó–ê–í–ï–†–®–Å–ù**
**–î–∞—Ç–∞:** 06.10.2025

---

## üéØ –¶–µ–ª–∏ —Å–ø—Ä–∏–Ω—Ç–∞

‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å Inventory UI
‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤
‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É
‚úÖ –°–æ–∑–¥–∞—Ç—å UI –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤
‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –æ—Å—Ç–∞—Ç–∫–æ–≤ (–Ω–∏–∑–∫–∏–π/–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π/–≤—ã—Å–æ–∫–∏–π)

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. StockWithItem Model

#### **–§–∞–π–ª:** `Core/Database/Models/Stock.swift`

‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `StockWithItem`**
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ `Stock` + `Item` –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- Computed properties –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–ª—è–º
- –ú–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:
  - `isLowStock` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ ‚â§ minQuantity
  - `isOutOfStock` ‚Äî quantity == 0
  - `isOverStock` ‚Äî quantity > maxQuantity
  - `stockStatus` ‚Äî –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å –æ—Å—Ç–∞—Ç–∫–∞

‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω enum `StockStatus`**
- `.outOfStock` ‚Äî –Ω–µ—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ (–∫—Ä–∞—Å–Ω—ã–π)
- `.low` ‚Äî –Ω–∏–∑–∫–∏–π –æ—Å—Ç–∞—Ç–æ–∫ (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
- `.normal` ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π (–∑–µ–ª—ë–Ω—ã–π)
- `.high` ‚Äî –∏–∑–±—ã—Ç–æ–∫ (—Å–∏–Ω–∏–π)
- –í–∫–ª—é—á–∞–µ—Ç —Ü–≤–µ—Ç–∞, –∏–∫–æ–Ω–∫–∏ –∏ –ª–µ–π–±–ª—ã –¥–ª—è UI

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```swift
let stockWithItem = StockWithItem(stock: stock, item: item)
if stockWithItem.isLowStock {
    print("‚ö†Ô∏è Low stock for \(stockWithItem.name)")
}
```

---

### 2. StockService ‚Äî JOIN Queries

#### **–û–±–Ω–æ–≤–ª—ë–Ω:** `Core/CRUD/StockService.swift`

‚úÖ **–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**

**`fetchAllWithItems()`**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –æ—Å—Ç–∞—Ç–∫–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤ —á–µ—Ä–µ–∑ JOIN
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç GRDB `including(required:)` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–≤—è–∑—ã–≤–∞–Ω–∏—è
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É (ASC)

**`fetchByLocationWithItems(_ location:)`**
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤ –ø–æ –ª–æ–∫–∞—Ü–∏–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤

**`fetchLowStockWithItems(threshold:)`**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã —Å –Ω–∏–∑–∫–∏–º –æ—Å—Ç–∞—Ç–∫–æ–º
- –î–≤–∞ —Ä–µ–∂–∏–º–∞:
  - –° `threshold`: quantity ‚â§ threshold
  - –ë–µ–∑: quantity ‚â§ minQuantity (–∏–∑ –∑–∞–ø–∏—Å–∏ Stock)

**`fetchLocations()`**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –í—Å–µ –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç GRDB associations –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö JOIN
- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç `[StockWithItem]` –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö Stock/Item
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ (single SQL query)

---

### 3. InventoryView ‚Äî –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞

#### **–ü–µ—Ä–µ–ø–∏—Å–∞–Ω:** `UI/InventoryView.swift`

‚úÖ **–ù–æ–≤—ã–π UI —Å —Å–µ–∫—Ü–∏—è–º–∏:**

**1. Summary Section**
- Total Items ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∑–∏—Ü–∏–π –Ω–∞ —Å–∫–ª–∞–¥–µ
- Total Units ‚Äî –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –µ–¥–∏–Ω–∏—Ü
- Low Stock ‚Äî –ø–æ–∑–∏—Ü–∏–π —Å –Ω–∏–∑–∫–∏–º –æ—Å—Ç–∞—Ç–∫–æ–º
- Out of Stock ‚Äî –ø–æ–∑–∏—Ü–∏–π –±–µ–∑ –æ—Å—Ç–∞—Ç–∫–∞
- –¶–≤–µ—Ç–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞

**2. Filter Section**
- Segmented Picker:
  - All ‚Äî –≤—Å–µ –æ—Å—Ç–∞—Ç–∫–∏
  - Low Stock ‚Äî —Ç–æ–ª—å–∫–æ –Ω–∏–∑–∫–∏–µ
  - Out of Stock ‚Äî —Ç–æ–ª—å–∫–æ –Ω—É–ª–µ–≤—ã–µ
  - Normal ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –æ—Å—Ç–∞—Ç–∫–∏
- Location Picker (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ë–î)

**3. Stock Items Section**
- –°–ø–∏—Å–æ–∫ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
  - –ò–∫–æ–Ω–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (—Ü–≤–µ—Ç–Ω–∞—è)
  - –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
  - SKU, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –ª–æ–∫–∞—Ü–∏—è
  - –¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
  - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

‚úÖ **StockRow Component**
- –ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏ –æ—Å—Ç–∞—Ç–∫–∞
- –°—Ç–∞—Ç—É—Å-–∏–∫–æ–Ω–∫–∞ + –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è + –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- –¶–≤–µ—Ç–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –Ω–∏–∑–∫–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤

‚úÖ **InventoryViewModel**
- `@MainActor` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- Reactive —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:
  - –ü–æ —Ç–µ–∫—Å—Ç—É (name/SKU/category)
  - –ü–æ —Å—Ç–∞—Ç—É—Å—É –æ—Å—Ç–∞—Ç–∫–∞
  - –ü–æ –ª–æ–∫–∞—Ü–∏–∏
- Computed properties:
  - `filteredStockItems` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - `totalQuantity` ‚Äî —Å—É–º–º–∞ –≤—Å–µ—Ö –µ–¥–∏–Ω–∏—Ü
  - `lowStockCount` / `outOfStockCount`

‚úÖ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- Searchable (–ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/SKU/–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
- Pull-to-refresh —á–µ—Ä–µ–∑ `refresh()`
- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞ (toolbar)
- –ü–µ—Ä–µ—Ö–æ–¥ –≤ StockDetailView –ø–æ –Ω–∞–∂–∞—Ç–∏—é
- –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å `ContentUnavailableView`

---

### 4. StockDetailView ‚Äî –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤

#### **–°–æ–∑–¥–∞–Ω:** `UI/StockDetailView.swift`

‚úÖ **–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

**–°–µ–∫—Ü–∏–∏:**

**1. Item Information (Read-only)**
- Name, SKU, Category
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ (–Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è)

**2. Stock Status**
- –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
- –¶–≤–µ—Ç–Ω–æ–π badge —Å –ª–µ–π–±–ª–æ–º

**3. Quantity Management**
- Stepper –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (0-99999)
- Quick Adjust button –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä—É–ø–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º

**4. Location**
- TextField –¥–ª—è –≤–≤–æ–¥–∞/–∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏
- Auto-capitalization –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

**5. Thresholds**
- Toggle "Enable Min Threshold"
  - Stepper –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ minQuantity
- Toggle "Enable Max Threshold"
  - Stepper –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ maxQuantity

**6. Metadata**
- Last Updated (relative date)

‚úÖ **QuickAdjustmentView (Sheet)**
- Segmented Picker:
  - **Add** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∫ —Ç–µ–∫—É—â–µ–º—É
  - **Subtract** ‚Äî –≤—ã—á–µ—Å—Ç—å –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ
  - **Set To** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- Number pad –¥–ª—è –≤–≤–æ–¥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- Preview –Ω–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
- –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

‚úÖ **StockDetailViewModel**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (`hasChanges`)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `StockService.update()`
- Error handling —Å alert

‚úÖ **Toolbar:**
- Save button (disabled –µ—Å–ª–∏ –Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- Cancel button

---

### 5. AddStockView ‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤

#### **–°–æ–∑–¥–∞–Ω:** `UI/AddStockView.swift`

‚úÖ **–§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞:**

**–°–µ–∫—Ü–∏–∏:**

**1. Item Selection**
- Picker —Å–æ —Å–ø–∏—Å–∫–æ–º –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã **–±–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤**
- –î–µ—Ç–∞–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ (name, SKU, category)

**2. Quantity**
- Stepper (0-99999)
- Quick buttons: 10, 50, 100, 500
- –£–¥–æ–±–Ω—ã–π –≤–≤–æ–¥ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**3. Location**
- TextField –¥–ª—è –≤–≤–æ–¥–∞ –ª–æ–∫–∞—Ü–∏–∏
- Existing Locations:
  - Horizontal scroll —Å –∫–Ω–æ–ø–∫–∞–º–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ª–æ–∫–∞—Ü–∏–π
  - –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä —á–µ—Ä–µ–∑ tap
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ë–î

**4. Thresholds (Optional)**
- Toggle Min Quantity Alert
- Toggle Max Quantity Alert
- Steppers –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π

**5. Preview**
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞
- –í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

‚úÖ **AddStockViewModel**
- `loadData()` ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ—Ç:
  - –¢–æ–≤–∞—Ä—ã –±–µ–∑ –æ—Å—Ç–∞—Ç–∫–æ–≤ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ itemId)
  - –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ª–æ–∫–∞—Ü–∏–∏
- `isValid` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º:
  - –¢–æ–≤–∞—Ä –≤—ã–±—Ä–∞–Ω
  - Quantity > 0
- `save()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `StockService.create()`
- Callback `onStockAdded()` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —ç–∫—Ä–∞–Ω–∞

‚úÖ **Toolbar:**
- Add button (disabled –µ—Å–ª–∏ —Ñ–æ—Ä–º–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω–∞)
- Cancel button

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ** | 2 (StockDetailView, AddStockView) |
| **–§–∞–π–ª–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–æ** | 3 (Stock.swift, StockService.swift, InventoryView.swift) |
| **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞** | ~850 (UI + ViewModel) |
| **–ù–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤** | 4 (StockService JOIN queries) |
| **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** | 5 (InventoryView, StockRow, StockDetailView, AddStockView, QuickAdjustmentView) |
| **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ CRUD –æ—Å—Ç–∞—Ç–∫–æ–≤ + —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è |

---

## üé® UI/UX –£–ª—É—á—à–µ–Ω–∏—è

### –î–æ (Sprint 1-3)
- ‚ùå –ü–æ–∫–∞–∑—ã–≤–∞–ª —Ç–æ–ª—å–∫–æ Item ID –≤–º–µ—Å—Ç–æ –∏–º–µ–Ω–∏
- ‚ùå –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- ‚ùå –ù–µ–ª—å–∑—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞—Ç–∫–∏
- ‚ùå –ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —Å—Ç–∞—Ç—É—Å–∞
- ‚ùå –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –æ—Å—Ç–∞—Ç–æ–∫

### –ü–æ—Å–ª–µ (Sprint 4)
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–∞—Ö (name, SKU, category, location)
- ‚úÖ –¶–≤–µ—Ç–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤
- ‚úÖ –°–≤–æ–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (total items, low stock, out of stock)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ:
  - –°—Ç–∞—Ç—É—Å—É (All / Low / Out / Normal)
  - –õ–æ–∫–∞—Ü–∏–∏ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π Picker)
  - –ü–æ–∏—Å–∫—É (name/SKU/category)
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤:
  - Stepper –¥–ª—è —Ç–æ—á–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
  - Quick Adjust –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  - Min/Max thresholds
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤:
  - –í—ã–±–æ—Ä –∏–∑ —Ç–æ–≤–∞—Ä–æ–≤ –±–µ–∑ –æ—Å—Ç–∞—Ç–∫–æ–≤
  - Quick quantity buttons
  - –ü–æ–¥—Å–∫–∞–∑–∫–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ª–æ–∫–∞—Ü–∏—è–º–∏
- ‚úÖ Preview –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
- ‚úÖ Pull-to-refresh
- ‚úÖ –ü—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (ContentUnavailableView)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. StockWithItem Pattern
**–ü—Ä–æ–±–ª–µ–º–∞:** Stock –∏ Item —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞—Ç—å `struct StockWithItem` –¥–ª—è –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GRDB `including(required:)` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö JOIN
- –í—Å–µ UI —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `StockWithItem`, –∞ –Ω–µ —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –û–¥–∏–Ω SQL –∑–∞–ø—Ä–æ—Å –≤–º–µ—Å—Ç–æ N+1
- –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –£–¥–æ–±–Ω—ã–π API –¥–ª—è UI

### 2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
**–†–µ—à–µ–Ω–∏–µ:**
- –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ –æ—Å—Ç–∞—Ç–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ computed property `filteredStockItems`
- Reactive –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ `@Published`

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –î–ª—è —Å–∫–ª–∞–¥–æ–≤ —Å ~1000-5000 –ø–æ–∑–∏—Ü–∏–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ, —á–µ–º SQL –∑–∞–ø—Ä–æ—Å—ã
- SwiftUI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç UI
- Instant UI feedback (–±–µ–∑ network/disk latency)

### 3. Reusable Components
**–ü–∞—Ç—Ç–µ—Ä–Ω:**
- `StockRow` ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —è—á–µ–π–∫–∞ –¥–ª—è —Å–ø–∏—Å–∫–æ–≤
- `SummaryRow` ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- `QuickAdjustmentView` ‚Äî –º–æ–¥–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- DRY (Don't Repeat Yourself)
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å UI
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 4. Validation –≤ ViewModel
**–†–µ—à–µ–Ω–∏–µ:**
- `isValid` computed property –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–æ—Ä–º—ã
- `.disabled(!viewModel.isValid)` –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö
- `hasChanges` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- UX: disabled buttons —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—É
- Separation of concerns: UI –Ω–µ –∑–Ω–∞–µ—Ç –æ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞—Ö

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

1. **–ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Å—Ç–∞—Ç–∫–æ–≤** ‚úÖ
   - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Å –¥–µ—Ç–∞–ª—è–º–∏ —Ç–æ–≤–∞—Ä–æ–≤
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ (low/out/normal)
   - –°–≤–æ–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** ‚úÖ
   - –ü–æ —Å—Ç–∞—Ç—É—Å—É (All/Low/Out/Normal)
   - –ü–æ –ª–æ–∫–∞—Ü–∏–∏
   - –ü–æ –ø–æ–∏—Å–∫–æ–≤–æ–º—É –∑–∞–ø—Ä–æ—Å—É

3. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚úÖ
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ quantity —á–µ—Ä–µ–∑ stepper
   - Quick Adjust (Add/Subtract/Set)
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ location
   - –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ min/max thresholds
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (hasChanges)

4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ** ‚úÖ
   - –í—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–∞ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
   - Quick quantity buttons
   - –í—ã–±–æ—Ä –ª–æ–∫–∞—Ü–∏–∏ –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
   - Preview –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

5. **Edge cases** ‚úÖ
   - –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –æ—Å—Ç–∞—Ç–∫–æ–≤ ‚Üí ContentUnavailableView
   - –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ
   - –ù–µ—Ç –ª–æ–∫–∞—Ü–∏–π ‚Üí Picker —Å–∫—Ä—ã—Ç

---

## üìù Code Quality

### Best Practices –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ:

‚úÖ **Async/Await**
- –í—Å–µ database –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `async throws`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Task {}` –≤ UI callbacks

‚úÖ **@MainActor**
- –í—Å–µ ViewModels –ø–æ–º–µ—á–µ–Ω—ã `@MainActor`
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç UI updates –Ω–∞ main thread

‚úÖ **Type Safety**
- `StockWithItem` –≤–º–µ—Å—Ç–æ `(Stock, Item)` —Ç—É–ø–ª–æ–≤
- Enum `StockStatus` –≤–º–µ—Å—Ç–æ magic strings

‚úÖ **Error Handling**
- Try/catch —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏
- User-facing error messages —á–µ—Ä–µ–∑ alerts

‚úÖ **Separation of Concerns**
- UI ‚Üí ViewModel ‚Üí Service ‚Üí Database
- –ö–∞–∂–¥—ã–π —Å–ª–æ–π –∏–º–µ–µ—Ç —á—ë—Ç–∫—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å

‚úÖ **MARK comments**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –ø–æ —Å–µ–∫—Ü–∏—è–º
- –õ–µ–≥–∫–æ navigate –≤ Xcode

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. ‚ö†Ô∏è **–§–∞–π–ª—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Xcode –ø—Ä–æ–µ–∫—Ç**
   - StockDetailView.swift
   - AddStockView.swift
   - –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é: Right-click UI folder ‚Üí Add Files

2. ‚ö†Ô∏è **–ù–µ—Ç Unit-—Ç–µ—Å—Ç–æ–≤** (–±—É–¥–µ—Ç –≤ –°–ø—Ä–∏–Ω—Ç–µ 10)

3. ‚ö†Ô∏è **–ù–µ—Ç Undo/Redo** (–±—É–¥–µ—Ç –≤ v1.3)

4. ‚ö†Ô∏è **–ù–µ—Ç Batch Operations** (–±—É–¥–µ—Ç –≤ v1.3)

5. ‚ö†Ô∏è **–ù–µ—Ç Export –æ—Ç—á—ë—Ç–æ–≤** (–°–ø—Ä–∏–Ω—Ç 7)

---

## üîú –°–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç: Kit Management

### –°–ø—Ä–∏–Ω—Ç 5 (1-2 –Ω–µ–¥–µ–ª–∏)
**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–ª–µ–∫—Ç–∞–º–∏

**–ó–∞–¥–∞—á–∏:**
1. ‚ú® **KitsView** ‚Äî —Å–ø–∏—Å–æ–∫ –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤
2. ‚ú® **KitDetailView** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Å—Ç–∞–≤–∞
3. ‚ú® **AddKitView** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞
4. ‚ú® **AddPartToKitView** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
5. ‚ú® **AssemblyView** ‚Äî UI –¥–ª—è —Å–±–æ—Ä–∫–∏/—Ä–∞–∑–±–æ—Ä–∫–∏ –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤
6. ‚ú® **ShortageCalculator** ‚Äî –ø–æ–∫–∞–∑ –¥–µ—Ñ–∏—Ü–∏—Ç–∞ –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `InventoryLogic.assembleKit()` (–≥–æ—Ç–æ–≤)
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å `calculateAvailableKits()` –≤ —Å–ø–∏—Å–∫–µ
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

---

## ‚úÖ –ò—Ç–æ–≥–∏ –°–ø—Ä–∏–Ω—Ç–∞ 4

**–°—Ç–∞—Ç—É—Å:** ‚ú® **–£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–Å–ù**

–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω Inventory UI:
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–∞—Ö –∏ –æ—Å—Ç–∞—Ç–∫–∞—Ö
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Quick Adjust
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤
- ‚úÖ –°–≤–æ–¥–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ Professional UX (–ø—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è, preview)

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 1 –¥–µ–Ω—å (06.10.2025)
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:** 55% (–°–ø—Ä–∏–Ω—Ç—ã 1-4 –∑–∞–≤–µ—Ä—à–µ–Ω—ã)

**–û—Å—Ç–∞–ª–æ—Å—å –¥–æ MVP (v1.2):**
- –°–ø—Ä–∏–Ω—Ç 5: Kit Management UI
- –°–ø—Ä–∏–Ω—Ç 6: QR —Å–∏—Å—Ç–µ–º–∞
- –°–ø—Ä–∏–Ω—Ç 7: Export/Import
- –°–ø—Ä–∏–Ω—Ç 8: UI —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- –°–ø—Ä–∏–Ω—Ç 9: OpenAI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –°–ø—Ä–∏–Ω—Ç 10: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ + Beta

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 06.10.2025
**–°–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç:** Kit Management (–°–ø—Ä–∏–Ω—Ç 5)
